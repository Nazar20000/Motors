# UFW Production Firewall Configuration for D.N B Motors V
# Run these commands on your production server

# Reset UFW to default
ufw --force reset

# Set default policies
ufw default deny incoming
ufw default allow outgoing

# Allow SSH (change port if you use non-standard SSH port)
ufw allow ssh
ufw allow 22/tcp

# Allow HTTP and HTTPS
ufw allow 80/tcp
ufw allow 443/tcp

# Allow DNS (if needed)
ufw allow 53/tcp
ufw allow 53/udp

# Allow NTP for time synchronization
ufw allow 123/udp

# Allow SMTP for email (if using local mail server)
ufw allow 25/tcp
ufw allow 587/tcp

# Allow IMAP and POP3 (if needed)
ufw allow 993/tcp
ufw allow 995/tcp

# Rate limiting for SSH (optional, for additional security)
ufw limit ssh

# Enable UFW
ufw enable

# Show status
ufw status verbose

# Save configuration
ufw --force enable

# Additional security measures (optional)
# Install fail2ban for SSH protection
# apt install fail2ban

# Configure fail2ban
# cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local
# systemctl enable fail2ban
# systemctl start fail2ban

# Monitor logs
# tail -f /var/log/ufw.log
# tail -f /var/log/fail2ban.log
